languagesystem DFLT dflt;
languagesystem gjr2 dflt;
languagesystem gujr dflt;

#include (gdef.fea)
include (markclasses.fea);
include (lookups.fea);


#################
# BASIC SHAPING #
#################


# AKHAND FORMS
################

feature akhn {
	lookup akhn;
} akhn;


# REPH
#######

feature rphf {
	lookup rphf;
} rphf;


# RAKAR FORMS
##############

feature blwf { # Below-Base Forms

script DFLT;
	language dflt;
		lookup blwf_gjr2 {
			sub gjVirama gjRa by gjRakar;
		} blwf_gjr2;

		lookup blwf_gujr {
			sub gjRa gjVirama by gjRakar;
		} blwf_gujr;

script gjr2;
	language dflt;
		lookup blwf_gjr2;

script gujr;
	language dflt;
		lookup blwf_gujr;

} blwf;


# BELOW-BASE SUBSTITUTIONS
###########################

feature blws {


	# TRICONSONANTAL CONJUNCTS

	sub gjK gjPa gjRakar by gjKPRa;
	sub gjKTa gjRakar by gjKTRa; 

	sub gjNTa gjRakar by gjNTRa;
	sub gjN gjDa gjRakar by gjNDRa;

	sub gjLDa gjRakar by gjLDRa;

	sub gjSsKa gjRakar by gjSsKRa;
	sub gjSsTta gjRakar by gjSsTtRa;
	sub gjSsTtha gjRakar by gjSsTthRa;

	sub gjSKa gjRakar by gjSKRa;
	sub gjSTta gjRakar by gjSTtRa;
	sub gjS gjTa gjRakar by gjSTRa;


	# BICONSONANTAL CONJUNCTS
	
	sub gjKa gjRakar by gjKRa;
	sub gjKha gjRakar by gjKhRa;
	sub gjGa gjRakar by gjGRa;
	sub gjGha gjRakar by gjGhRa;
	sub gjNga gjRakar by gjNgRa;

	sub gjCa gjRakar by gjCRa;
	sub gjCha gjRakar by gjChRa;
	sub gjJa gjRakar by  gjJRa;
	sub gjJha gjRakar by gjJhRa;
	sub gjNya gjRakar by gjNyRa;

	sub gjTta gjRakar by gjTtRa;
	sub gjTtha gjRakar by gjTthRa;
	sub gjDda gjRakar by gjDdRa;
	sub gjDdha gjRakar by gjDdhRa;
	sub gjNna gjRakar by gjNnRa;

	sub gjTa gjRakar by gjTRa;
	sub gjTha gjRakar by gjThRa;
	sub gjDa gjRakar by gjDRa;
	sub gjDha gjRakar by gjDhRa;
	sub gjNa gjRakar by gjNRa;

	sub gjPa gjRakar by gjPRa;
	sub gjPha gjRakar by gjPhRa;
	sub gjBa gjRakar by gjBRa;
	sub gjBha gjRakar by gjBhRa;
	sub gjMa gjRakar by gjMRa;

	sub gjYa gjRakar by gjYRa;
	sub gjLa gjRakar by gjLRa;
	sub gjVa gjRakar by gjVRa;
	sub gjSha gjRakar by gjShRa;
	sub gjSsa gjRakar by gjSsRa;
	sub gjSa gjRakar by gjSRa;
	sub gjHa gjRakar by gjHRa;

	# RAKAR HALF FORMS

	sub gjK gjRakar by gjKR;
	sub gjKh gjRakar by gjKhR;
	sub gjG gjRakar by gjGR;
	sub gjGh gjRakar by gjGhR;

	sub gjC gjRakar by gjCR;
	sub gjJ gjRakar by gjJR;
	sub gjJh gjRakar by gjJhR;

	sub gjTt gjRakar by gjTtR;
	sub gjTth gjRakar by gjTthR;
	sub gjDd gjRakar by gjDdR;
	sub gjDdh gjRakar by gjDdhR;

	sub gjT gjRakar by gjTR;
	sub gjTh gjRakar by gjThR;
	sub gjD gjRakar by gjDR;
	sub gjDh gjRakar by gjDhR;
	sub gjN gjRakar by gjNR;

	sub gjP gjRakar by gjPR;
	sub gjPh gjRakar by gjPhR;
	sub gjB gjRakar by gjBR;
	sub gjBh gjRakar by gjBhR;
	sub gjM gjRakar by gjMR;

	sub gjY gjRakar by gjYR;
	sub gjV gjRakar by gjVR;
	sub gjS gjRakar by gjSR;

} blws;


# HALF FORMS
#############

feature half {

	script DFLT;
		lookup half;

	script gjr2;
		lookup half;

	script gujr;
		lookup half;

} half;


# CONJUNCTS
############

feature cjct {
	lookup cjct;
} cjct;


# MANDATORY PRESENTATION FORMS 
###############################

feature pres {
	lookup pres;
} pres;


# HALANT FORMS
###############

feature haln {
	lookup haln;
} haln;


# DISTANCE
###########

feature dist {
	lookup dist;
} dist;


# ABOVE_BASE MARKS
###################

feature abvm {
	lookup abvm;
} abvm;


# BELOW-BASE MARKS
###################

feature blwm {
	lookup blwm;
} blwm;


# CONTEXTUAL ATERNATES
#######################

feature calt {
	lookup halfForm_calt;
} calt;